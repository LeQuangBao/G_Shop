@model PagedList.IPagedList<G_Shop.Models.NguoiDung>
@using PagedList.Mvc
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}
<script>
    $(document).ready(function () {
        $('#submit').on('click', function () {     
            var tendangnhap = document.getElementById("tendangnhap").value;
            console.log(tendangnhap);
            var matkhau = document.getElementById("matkhau").value;
            console.log(matkhau);
            var email = document.getElementById("email").value;
            console.log(email);
            var sodienthoai = document.getElementById("sodienthoai").value;
            console.log(sodienthoai);
            var vaitro = document.getElementById("vaitro").value;
            console.log(vaitro);
            $.ajax({
                type: "POST",
                url: '/User/themnguoidung',
                data: {
                    tendangnhap: tendangnhap,
                    matkhau: matkhau,
                    email: email,
                    sodienthoai: sodienthoai,
                    vaitro:vaitro
                },
                cache: false,
                dataType: "json",
                success: function (result) {
                    if (result == "ok") {
                        alert("Thêm thành công");
                        setTimeout(function () {
                            location.reload();
                        }, 2000);
                    }


                },
                error: function (err) {
                    console.log(err.status + " - " + err.statusText);
                }
            });
        });
        
    });
</script>

<link href="~/Scripts/dropzone/basic.css" rel="stylesheet" />
<link href="~/Scripts/dropzone/dropzone.css" rel="stylesheet" />
<div class="col-lg-12">
    <h2>Quản lí người dùng
    <span style="float:right">
    <button class="btn btn-primary" data-toggle="modal" data-target="#myModal_them"><i class="glyphicon glyphicon-plus"></i> Thêm</button>
</span>
    </h2>
    <div class="col-md-5 col-sm-5 col-xs-12 form-group top_search" style="margin-left:200px">
        <form action="/Admin/User/timkiemnguoidung" method="post" >
            <div @*style="width:500px"*@ class="input-group col-lg-offset-2">
                <input type="text" name="txttimkiem" id="keyword" class="form-control" placeholder="Tìm kiếm..." required>
                <span class="input-group-btn">
                    <button class="btn btn-primary" type="submit" id="search">Tìm kiếm</button>
                </span>
            </div>
        </form>
       
    </div>
    <div role="tabpanel" class="tab-pane" id="list">

        <table id="datatable" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <td>Tên đăng nhập</td>
                    <th>Email</th>
                    <th>Số điện thoại</th>
                    <th>Vai trò</th>
                    <th>Điều khiển</th>
                </tr>
            </thead>
            <tbody>
             @for(var i = 0; i < Model.Count; i++) {
                    <tr>
                        <td>@Model[i].TenDangNhap</td>
                        <td>@Model[i].Email</td>
                        <td>@Model[i].SoDienThoai</td>
                        <td>@Model[i].VaiTro</td>
                        <td>
                            <a href="/Admin/User/suanguoidung?id=@Model[i].MaNguoiDung" style="color:white">
                                <i class="btn btn-primary">
                                    <i class="glyphicon glyphicon-pencil">
                                        Sửa
                                    </i>

                                </i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="row">
        <div class="col-lg-offset-4">
            @Html.PagedListPager(Model, page => Url.Action("Index", new {page}))
        </div>

    </div>
</div>
<section>
    <!-- Modal Thêm người dùng -->
    <div class="modal fade" id="myModal_them" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Thêm người dùng</h4>
                </div>
                <div class="modal-body">
                    <form id="add" name="add" class="form-horizontal" role="form" method="post">
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">
                                Tên đăng nhập <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input type="text" id="tendangnhap" name="tendangnhap" required="required" class="form-control col-md-7 col-xs-12">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">
                                Mật khẩu <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input type="password" id="matkhau" name="password" required="required" class="form-control col-md-7 col-xs-12">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">
                                Email
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input id="email" class="form-control col-md-7 col-xs-12" type="text" name="middle-name">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Số điện thoại <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input id="sodienthoai" name="sodienthoai" class="date-picker form-control col-md-7 col-xs-12" required="required" type="text">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Vai trò <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                @*<input id="sdt" name="phone" class="date-picker form-control col-md-7 col-xs-12" required="required" type="text">*@
                                <select class="date-picker form-control col-md-7 col-xs-12" id="vaitro">
                                    <option value="0">Người dùng</option>
                                    <option value="1">Người quản trị</option>
                                </select>
                            </div>
                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-primary" id="submit">Lưu</button>
                </div>
            </div>
        </div>
    </div>
</section>


